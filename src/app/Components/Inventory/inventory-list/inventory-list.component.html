<!-- <h3 class="p-3 text-center">Inventories List</h3>
<div class="container">
   
    <br>
    <br>
   
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>userName</th>
                <th>equipment Code</th>
                <th>createdAt</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let invent of inventories">
                <td>{{invent.userName}}</td>
                <td>{{invent.equipmentCode}}</td>
                <td>{{invent.createdAt}}</td>
            </tr>
        </tbody>
    </table>
</div> -->

<!-- <p-messages [value]="msgs"></p-messages>
        <p-toolbar styleClass="p-mb-4">
            <ng-template pTemplate="left">
                <button pButton pRipple icon="pi pi-plus" class="p-button-primary  p-button-rounded p-mr-2 new"
                    routerLink="/home/addEquipment" pTooltip="Add a New Equipment" tooltipPosition="right"></button>

                 <button pButton pRipple label="{{'Actions.Scan' | translate}}" class="p-button-info p-mr-2 info" routerLink="/home/qrcode"></button>

            </ng-template>
        </p-toolbar> -->

<div class="container-fluid">

    <div class="card">


        <p-toast posinset="top-right"></p-toast>
        <div class="card-body">
            <div class="row">
                <div class="col-md-11">
                    <h5>{{'Dashboard.ManageEquipments' | translate}}</h5>
                </div>
               
            </div>
            <div class="row">
                <div class="col-md-12"><br /></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
                    <p-table #dt [value]="equipments" [rows]="10" styleClass="p-datatable-responsive-demo"
                        [paginator]="true" [(selection)]="selectedProducts" [rowHover]="true" dataKey="id"
                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                        [showCurrentPageReport]="true"
                        [globalFilterFields]="['equipmentName','department','manufacturer','supplier']">
                        <ng-template pTemplate="caption">
                            <div class="p-d-flex p-ai-center p-jc-between">


                                <span class="p-input-icon-right">
                                    <i class="pi pi-search"></i>
                                    <input pInputText class="form-control" type="text"
                                        (input)="dt.filterGlobal($event.target.value,'contains')"
                                        placeholder="{{'search.Search'|translate}}..." />
                                </span>
                            </div>
                        </ng-template>
                        <ng-template pTemplate="header">

                            <tr>
                                <th pSortableColumn="Code">{{'equipment.internalCode' | translate}} <p-sortIcon
                                        field="Code">
                                    </p-sortIcon>
                                </th>
                                <th pSortableColumn="upaCode">{{'equipment.upaCode' | translate}} <p-sortIcon
                                        field="upaCode">
                                    </p-sortIcon>
                                </th>
                                <th pSortableColumn="equipmentName">{{'equipment.Name' | translate}} <p-sortIcon
                                        field="equipmentName"></p-sortIcon>
                                </th>
                                <th pSortableColumn="manufacturer">{{'equipment.Manufacturer' | translate}} <p-sortIcon
                                        field="manufacturer"></p-sortIcon>
                                </th>
                                <th pSortableColumn="healthDirectoryName">{{'equipment.governorate' | translate}}
                                    <p-sortIcon field="healthDirectoryName"></p-sortIcon>
                                </th>
                                <th pSortableColumn="healthDistrictName">{{'equipment.district' | translate}}
                                    <p-sortIcon field="healthDistrictName"></p-sortIcon>
                                </th>
                                <th pSortableColumn="healthCareUnitName">{{'equipment.healthCareUnit' | translate}}
                                    <p-sortIcon field="healthCareUnitName"></p-sortIcon>
                                </th>
                                <th pSortableColumn="purchaseDate">{{'equipment.PurchaseDate' | translate}} <p-sortIcon
                                    field="purchaseDate"></p-sortIcon>
                            </th>
                            <th pSortableColumn="installationDate">{{'equipment.InstallationDate' | translate}}
                                <p-sortIcon field="installationDate"></p-sortIcon>
                            </th>
                                 <!-- <th>{{'Actions.Action' | translate}}</th>  -->
                                 <th>Scanned At</th> 
                             
                            </tr>

                            <tr>
                                <th>
                                    <input pInputText type="text"
                                        (input)="dt.filter($event.target.value, 'internalCode', 'contains')"
                                        [value]="dt.filters['internalCode']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <th>
                                    <input pInputText type="text"
                                        (input)="dt.filter($event.target.value, 'upaCode', 'contains')"
                                        [value]="dt.filters['upaCode']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <th>
                                    <p-dropdown *ngIf="translate.currentLang==='En'" [options]="equipments"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="equipmentName"
                                        optionValue="equipmentName" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'equipmentName','equals')"
                                        [filterBy]="dt.filters['equipmentName']?.value" styleClass="ui-column-filter"
                                        class="filterDropdwon"></p-dropdown>
                                    <p-dropdown *ngIf="translate.currentLang==='Ar'" [options]="equipments"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="equipmentNameAr"
                                        optionValue="equipmentNameAr" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'equipmentNameAr','equals')"
                                        [filterBy]="dt.filters['equipmentNameAr']?.value" styleClass="ui-column-filter">
                                    </p-dropdown>
                                </th>
                                <th>
                                    <p-dropdown *ngIf="translate.currentLang==='En'" [options]="manufacturerList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="manufacturerName"
                                        optionValue="manufacturerName" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'manufacturerName','equals')"
                                        [filterBy]="dt.filters['manufacturerName']?.value" styleClass="ui-column-filter"
                                        class="filterDropdwon"></p-dropdown>
                                    <p-dropdown *ngIf="translate.currentLang==='Ar'" [options]="manufacturerList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="manufacturerNameAr"
                                        optionValue="manufacturerNameAr" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'manufacturerNameAr','equals')"
                                        [filterBy]="dt.filters['manufacturerNameAr']?.value"
                                        styleClass="ui-column-filter">
                                    </p-dropdown>
                                </th>
                                <th>
                                    <input pInputText type="text"
                                        (input)="dt.filter($event.target.value, 'serialNumber', 'contains')"
                                        [value]="dt.filters['serialNumber']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <th>
                                    <p-dropdown *ngIf="translate.currentLang==='En'" [options]="departmentsList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="departmentName"
                                        optionValue="departmentName" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'departmentName','contains') ; fillHospital($event.value)"
                                        [filterBy]="dt.filters['departmentName']?.value" styleClass="ui-column-filter"
                                        class="filterDropdwon"></p-dropdown>
                                    <p-dropdown *ngIf="translate.currentLang==='Ar'" [options]="departmentsList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="departmentNameAr"
                                        optionValue="departmentNameAr" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'departmentNameAr','contains'); fillHospital($event.value)"
                                        [filterBy]="dt.filters['departmentNameAr']?.value"
                                        styleClass="ui-column-filter">
                                    </p-dropdown>
                                </th>
                                <th>
                                    <p-dropdown *ngIf="translate.currentLang==='En'" [options]="suppliersList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="supplierName"
                                        optionValue="supplierName" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'supplierName','equals')"
                                        [filterBy]="dt.filters['supplierName']?.value" styleClass="ui-column-filter"
                                        class="filterDropdwon"></p-dropdown>
                                    <p-dropdown *ngIf="translate.currentLang==='Ar'" [options]="suppliersList"
                                        placeholder="{{'search.Search'|translate}}" optionLabel="supplierNameAr"
                                        optionValue="supplierNameAr" [showClear]="true" appendTo="body"
                                        (onChange)="dt.filter($event.value,'supplierNameAr','equals')"
                                        [filterBy]="dt.filters['supplierNameAr']?.value" styleClass="ui-column-filter">
                                    </p-dropdown>
                                </th>
                                <th>
                                    <input pInputText type="date"
                                        (input)="dt.filter($event.target.value, 'purchaseDate', 'contains')"
                                        [value]="dt.filters['purchaseDate']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <th>
                                    <input pInputText type="date"
                                        (input)="dt.filter($event.target.value, 'installationDate', 'contains')"
                                        [value]="dt.filters['installationDate']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <th>
                                    <input pInputText type="date"
                                        (input)="dt.filter($event.target.value, 'createdAt', 'contains')"
                                        [value]="dt.filters['createdAt']?.value"
                                        placeholder="{{'search.Search'|translate}}"
                                        class="p-column-filter form-control">
                                </th>
                                <!-- <th></th> -->
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-eq>

                            <tr>
                                <td>{{eq.internalCode}}</td>
                                <td>{{eq.upaCode}}</td>
                                <td>{{translate.currentLang == "En" ? eq.equipmentName:eq.equipmentNameAr}}</td>
                                <td>{{translate.currentLang == "En" ? eq.manufacturerName:eq.manufacturerNameAr}}</td>
                                <td>{{eq.serialNumber}}</td>
                                <td>{{translate.currentLang == "En" ? eq.departmentName:eq.departmentNameAr}}</td>
                                <td>{{translate.currentLang == "En" ? eq.supplierName:eq.supplierNameAr}}</td>
                                <td>{{eq.purchaseDate}}</td>
                                <td>{{eq.installationDate}}</td>
                                <td>{{eq.createdAt| date}}</td>
                                <!-- <td>{{eq.createdAt | date:'h:mm:ss a'}}</td> -->
                                <!-- <td>
                                    <button pButton pRipple icon="pi pi-pencil"
                                        class="p-button-rounded p-button-info edit" (click)="openNew(eq)"></button>

                                    <button pButton pRipple (click)="confirmDelete(eq.id,eq.equipmentName)"
                                        pTooltip="delete an Equipment" tooltipPosition="top" icon="pi pi-trash"
                                        class="p-button-rounded p-button-danger edit"></button>
                                </td> -->
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="summary">
                            <div class="p-d-flex p-ai-center p-jc-between">
                                {{'In total there are.In total there are'| translate}} {{equipments ? equipments.length
                                : 0 }}
                                {{'Sidebar.equipments'| translate}}.
                            </div>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </div>
    </div>
    <div>
        <!-- <p>grouping By Date</p>
        <div *ngFor="let eq of eqscann">
            <P>{{eq.createdAt}}</P>
            <div *ngFor="let eqs of eq.listEquipment">
                <P>{{eqs.equipmentName}}</P>
            </div>
        </div> -->
        
        <h3>Scanned Equipments</h3>
        <div *ngFor="let eq of eqscann">
            <a data-toggle="collapse" class="list-group-item list-group-item-action   dropdown-toggle sidetoggle"  href="#{{eq.id}}" 
            role="button" aria-expanded="false" aria-controls="collapseExample">{{eq.createdAt|date}}</a>
  
            <div id="{{eq.id}}" class="panel-collapse collapse" style="width: 100%;">
        
            <!-- <P>{{eq.createdAt}}</P> -->
            
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>internalCode</th>
                    <th>upaCode</th>
                    <th>equipmentName</th>
                    <th>Brand</th>
                    <th>governorate</th>
                    <th>City</th>
                    <th>Hospital</th>
                    <!-- <th>PurchaseDate</th>
                    <th>InstallationDate</th> -->
                    <th>scannedAt</th>
                    <th>time</th>
                </tr>
            </thead>
            <tbody>
                <tr  *ngFor="let eqs of eq.listEquipment">
                    <td>{{eqs.internalCode}}</td>
                    <td>{{eqs.upaCode}}</td>
                    <td>{{eqs.equipmentName}}</td>
                    <td>{{eqs.manufacturerName}}</td>
                    <td>{{eqs.healthDirectoryName}}</td>
                    <td>{{eqs.healthDistrictName}}</td>
                    <td>{{eqs.healthCareUnitName}}</td>
                    <!-- <td>{{eqs.purchaseDate}}</td>
                    <td>{{eqs.installationDate}}</td>    -->
                    <td>{{eqs.createdAt | date}}</td> 
                    <td>{{eqs.createdAt | date:'h:mm:ss a'}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
</div>

